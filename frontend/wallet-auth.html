<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Klassik — Wallet Auth & API Tester</title>
  <style>
    body{font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,'Helvetica Neue',Arial;margin:20px}
    button,input,select,textarea{font:inherit;padding:8px;margin:6px 0}
    .card{border:1px solid #ddd;padding:12px;border-radius:6px;margin-bottom:12px}
    pre{background:#f7f7f7;padding:10px;border-radius:6px;overflow:auto}
    label{display:block;margin-top:8px}
  </style>
</head>
<body>
  <h1>Klassik — Wallet Auth & API Tester</h1>

  <div class="card">
    <strong>Server base URL</strong>
    <div>
      <input id="baseUrl" style="width:100%" value="http://[2a00:1f:ff80:3601:c034:4a37:e778:c624]:8130" />
      <div style="font-size:12px;color:#666;margin-top:6px">IPv6 example: http://[2a00:1f:ff80:3601:c034:4a37:e778:c624]:8130</div>
    </div>
  </div>

  <div class="card">
    <strong>Wallet</strong>
    <div>
      <button id="btnConnect">Connect Wallet</button>
      <span id="connected">Not connected</span>
    </div>
    <div>
      <label>Address</label>
      <input id="addr" style="width:100%" readonly />
    </div>
  </div>

  <div class="card">
    <strong>Nonce & Sign</strong>
    <div>
      <button id="btnNonce">Get Nonce</button>
      <button id="btnSignRegister">Sign & Register</button>
      <button id="btnSignLogin">Sign & Login</button>
    </div>
    <label>Message to sign</label>
    <textarea id="message" rows="4" style="width:100%" readonly></textarea>
    <label>Signature</label>
    <input id="signature" style="width:100%" readonly />
  </div>

  <div class="card">
    <strong>Token</strong>
    <div>
      <button id="btnShowToken">Show token</button>
      <button id="btnClearToken">Clear token</button>
    </div>
    <label>JWT (stored in localStorage)</label>
    <pre id="tokenView">(none)</pre>
    <label style="margin-top:8px">Admin token (for debug queries)</label>
    <input id="adminToken" style="width:100%" placeholder="set ADMIN_TOKEN to use debug endpoints" />
  </div>

  <div class="card">
    <strong>API Tests</strong>
    <div>
      <button id="btnProducts">GET /api/products</button>
      <button id="btnProductsOne">GET /api/products/:id (enter id)</button>
      <input id="productId" placeholder="product id" />
    </div>
    <div style="margin-top:8px">
      <button id="btnCreateOrder">POST /api/orders (protected)</button>
    </div>
    <div style="margin-top:8px">
      <button id="btnDebugUsers">GET /api/debug/users</button>
      <button id="btnDebugProducts">GET /api/debug/products</button>
      <button id="btnDebugNonces">GET /api/debug/nonces</button>
    </div>
    <label>Response</label>
    <pre id="apiResp">(no response yet)</pre>
  </div>

  <script src="/assets/js/wallet-auth.js"></script>
</body>
</html>
